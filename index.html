<!DOCTYPE html>
<html>
<head>
    <title>🔓 Vertus Kilidi Aç</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            max-width: 400px;
            margin: 0 auto;
        }
        .code { 
            font-size: 48px; 
            font-weight: bold; 
            color: #fff; 
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 5px;
            font-family: 'Courier New', monospace;
        }
        .info {
            font-size: 14px;
            opacity: 0.8;
            margin: 10px 0;
        }
        .timer {
            font-size: 16px;
            color: #ffeb3b;
            margin: 10px 0;
        }
        .warning {
            background: rgba(255,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .example {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔓 Vertus Kilidi Aç</h1>
        <div class="warning">
            ⚠️ DİKKAT: Ekrandaki kodu DEĞİL, aşağıdaki kodu girin!
        </div>
        
        <div class="code" id="realCode">YÜKLENİYOR...</div>
        <div class="timer" id="timer"></div>
        
        <div class="info">Bu kodu akıllı tahtaya girin</div>
        <div class="info">Ekrandaki kodu girmeyin!</div>
        <div class="info">Kod her 30 saniyede bir değişir</div>
        
        <div class="example">
            <strong>Örnek:</strong><br>
            Ekranda: <span style="color:#ff6b6b">124021</span> → Telefonda: <span style="color:#2ecc71">985978</span><br>
            <em>Ekrandakini girme, aşağıdakini gir!</em>
        </div>
    </div>

    <script>
        function generateRealCode() {
            const time = Math.floor(Date.now() / 30000);
            const secret = "vertus_okul_2024";
            const rawCode = secret + time;

            // Python'daki MD5 hash mantığını taklit et
            function pythonMD5Hash(input) {
                // Basit bir hash fonksiyonu - Python'daki gibi davranması için
                let hash = 0;
                for (let i = 0; i < input.length; i++) {
                    const char = input.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // 32-bit integer
                }
                return Math.abs(hash).toString(16).padStart(32, '0');
            }

            // Python'daki get_display_code mantığını taklit et
            function getDisplayCode() {
                const hash = pythonMD5Hash(rawCode);
                
                // Hash'ten sayısal karakterleri al
                let numericHash = "";
                for (let i = 0; i < hash.length; i++) {
                    const char = hash[i];
                    if (char >= '0' && char <= '9') {
                        numericHash += char;
                    }
                }

                // İlk 6 haneyi al
                let displayCode = numericHash.substring(0, 6);
                
                // Eğer yeterli yoksa tamamla
                if (displayCode.length < 6) {
                    const remaining = 6 - displayCode.length;
                    for (let i = 0; i < remaining; i++) {
                        displayCode += (time % 10).toString();
                    }
                }
                
                return displayCode;
            }

            // Python'daki get_real_code mantığını taklit et
            function getRealCode(displayCode) {
                let realCode = "";
                for (let i = 0; i < displayCode.length; i++) {
                    const digit = parseInt(displayCode[i]);
                    const realDigit = (10 - digit) % 10;
                    realCode += realDigit.toString();
                }
                return realCode;
            }

            const displayCode = getDisplayCode();
            const realCode = getRealCode(displayCode);
            
            document.getElementById('realCode').textContent = realCode;

            // Geri sayım
            const secondsLeft = 30 - (Math.floor(Date.now() / 1000) % 30);
            document.getElementById('timer').textContent = 
                `Kod ${secondsLeft} saniye sonra değişecek`;

            // Debug için (konsolda görmek için)
            console.log(`Zaman: ${time}, Görünen: ${displayCode}, Gerçek: ${realCode}`);
        }

        // Sayfa yüklendiğinde ve her saniye çalıştır
        generateRealCode();
        setInterval(generateRealCode, 1000);

        // Sayfa görünür olduğunda da güncelle
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                generateRealCode();
            }
        });
    </script>
</body>
</html>
