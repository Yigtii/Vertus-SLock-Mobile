<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertus OS - QR ≈ûifre √á√∂z√ºc√º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: #ecf0f1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            width: 100%;
            background: rgba(44, 62, 80, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #3498db;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 16px;
            opacity: 0.8;
        }

        .qr-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .qr-placeholder {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }

        .camera-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .camera-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .manual-input {
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .code-input {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 18px;
            text-align: center;
            letter-spacing: 3px;
            outline: none;
            transition: all 0.3s;
        }

        .code-input:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .numpad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .num-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .num-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .submit-btn {
            flex: 1;
            background: #2ecc71;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        .clear-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-btn:hover {
            background: #c0392b;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 500;
            display: none;
        }

        .success {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
            color: #2ecc71;
        }

        .error {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            color: #e74c3c;
        }

        .info-box {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
        }

        .info-box h3 {
            margin-bottom: 10px;
            color: #3498db;
        }

        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            opacity: 0.7;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .qr-placeholder {
                width: 150px;
                height: 150px;
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Vertus OS - QR ≈ûifre √á√∂z√ºc√º</h1>
        <p>QR kodu okutun veya ≈üifreyi manuel girin</p>
    </div>

    <div class="qr-section">
        <div class="qr-placeholder">üì∑</div>
        <button class="camera-btn" id="startCamera">
            <span>üì∑</span> Kamera ile QR Oku
        </button>
        <div id="cameraView" style="display: none; margin-top: 20px;">
            <video id="video" width="100%" autoplay></video>
            <button class="camera-btn" id="stopCamera" style="margin-top: 10px;">
                <span>‚ùå</span> Kamerayƒ± Kapat
            </button>
        </div>
    </div>

    <div class="manual-input">
        <div class="input-group">
            <label for="encryptedCode">≈ûifreli Kodu Girin (6 Haneli):</label>
            <input type="text" id="encryptedCode" class="code-input" maxlength="6" placeholder="------">
        </div>

        <div class="numpad">
            <button class="num-btn" data-number="1">1</button>
            <button class="num-btn" data-number="2">2</button>
            <button class="num-btn" data-number="3">3</button>
            <button class="num-btn" data-number="4">4</button>
            <button class="num-btn" data-number="5">5</button>
            <button class="num-btn" data-number="6">6</button>
            <button class="num-btn" data-number="7">7</button>
            <button class="num-btn" data-number="8">8</button>
            <button class="num-btn" data-number="9">9</button>
            <button class="num-btn" id="clearLast">‚å´</button>
            <button class="num-btn" data-number="0">0</button>
            <button class="num-btn" id="clearAll">C</button>
        </div>

        <div class="action-buttons">
            <button class="submit-btn" id="decryptBtn">≈ûifreyi √á√∂z ve G√∂ster</button>
            <button class="clear-btn" id="clearBtn">Temizle</button>
        </div>
    </div>

    <div class="result" id="result"></div>

    <div class="info-box">
        <h3>Nasƒ±l √áalƒ±≈üƒ±r?</h3>
        <p>1. Akƒ±llƒ± tahtadaki QR kodu okutun veya ≈üifreyi manuel girin</p>
        <p>2. "≈ûifreyi √á√∂z ve G√∂ster" butonuna tƒ±klayƒ±n</p>
        <p>3. √á√∂z√ºlm√º≈ü kodu akƒ±llƒ± tahtaya girin</p>
    </div>

    <div class="footer">
        <p>Vertus OS - Akƒ±llƒ± Tahta Kilidi v0.2.5</p>
    </div>
</div>

<script>
    // QR kod ≈üifreleme algoritmasƒ± (Python'dakiyle aynƒ±)
    function decryptCode(encryptedCode) {
        // ≈ûifreleme deseni: [-8, +7, -5, +3, -2, +5]
        const pattern = [-8, +7, -5, +3, -2, +5];
        let decrypted = "";

        for (let i = 0; i < 6; i++) {
            let encryptedDigit = parseInt(encryptedCode[i]);

            // ≈ûifreleme i≈ülemini tersine √ßevir
            let originalDigit = encryptedDigit - pattern[i];

            // Negatifse pozitif yap, 9'dan b√ºy√ºkse k√º√ß√ºlt
            while (originalDigit < 0) {
                originalDigit += 10;
            }
            while (originalDigit > 9) {
                originalDigit -= 10;
            }

            decrypted += originalDigit.toString();
        }

        return decrypted;
    }

    // DOM elementleri
    const encryptedCodeInput = document.getElementById('encryptedCode');
    const decryptBtn = document.getElementById('decryptBtn');
    const clearBtn = document.getElementById('clearBtn');
    const clearLastBtn = document.getElementById('clearLast');
    const clearAllBtn = document.getElementById('clearAll');
    const resultDiv = document.getElementById('result');
    const startCameraBtn = document.getElementById('startCamera');
    const stopCameraBtn = document.getElementById('stopCamera');
    const cameraView = document.getElementById('cameraView');
    const video = document.getElementById('video');

    let stream = null;

    // Numpad i≈ülevselliƒüi
    document.querySelectorAll('.num-btn[data-number]').forEach(button => {
        button.addEventListener('click', () => {
            const number = button.getAttribute('data-number');
            if (encryptedCodeInput.value.length < 6) {
                encryptedCodeInput.value += number;
            }
        });
    });

    // Son karakteri sil
    clearLastBtn.addEventListener('click', () => {
        encryptedCodeInput.value = encryptedCodeInput.value.slice(0, -1);
    });

    // T√ºm√ºn√º temizle
    clearAllBtn.addEventListener('click', () => {
        encryptedCodeInput.value = '';
        hideResult();
    });

    clearBtn.addEventListener('click', () => {
        encryptedCodeInput.value = '';
        hideResult();
    });

    // ≈ûifre √ß√∂zme butonu
    decryptBtn.addEventListener('click', () => {
        const encryptedCode = encryptedCodeInput.value;

        if (encryptedCode.length !== 6) {
            showResult('L√ºtfen 6 haneli ≈üifreyi girin!', 'error');
            return;
        }

        if (!/^\d+$/.test(encryptedCode)) {
            showResult('≈ûifre sadece rakamlardan olu≈ümalƒ±dƒ±r!', 'error');
            return;
        }

        const decryptedCode = decryptCode(encryptedCode);
        showResult(`√á√∂z√ºlm√º≈ü Kod: <strong>${decryptedCode}</strong><br>Bu kodu akƒ±llƒ± tahtaya girin.`, 'success');
    });

    // Sonu√ß g√∂sterme fonksiyonu
    function showResult(message, type) {
        resultDiv.innerHTML = message;
        resultDiv.className = 'result ' + type;
        resultDiv.style.display = 'block';
    }

    // Sonu√ß gizleme fonksiyonu
    function hideResult() {
        resultDiv.style.display = 'none';
    }

    // Kamera i≈ülevselliƒüi
    startCameraBtn.addEventListener('click', async () => {
        try {
            stream = await navigator.mediaDevices.getUserMedia({
                video: { facingMode: 'environment' }
            });
            video.srcObject = stream;
            cameraView.style.display = 'block';
            startCameraBtn.style.display = 'none';

            // Burada QR kod okuma k√ºt√ºphanesi entegre edilebilir
            // √ñrnek: jsQR k√ºt√ºphanesi kullanƒ±labilir
        } catch (err) {
            console.error('Kamera eri≈üim hatasƒ±:', err);
            alert('Kameraya eri≈üilemedi. L√ºtfen manuel giri≈ü yapƒ±n.');
        }
    });

    stopCameraBtn.addEventListener('click', () => {
        if (stream) {
            stream.getTracks().forEach(track => track.stop());
        }
        cameraView.style.display = 'none';
        startCameraBtn.style.display = 'inline-flex';
    });

    // QR kod okuma (jsQR k√ºt√ºphanesi entegrasyonu i√ßin √∂rnek)
    // Bu kƒ±sƒ±m ger√ßek uygulamada jsQR k√ºt√ºphanesi eklenerek tamamlanabilir
    /*
    function scanQRCode() {
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, imageData.width, imageData.height);

        if (code) {
            encryptedCodeInput.value = code.data;
            stopCameraBtn.click();
            decryptBtn.click();
        }
    }

    setInterval(scanQRCode, 1000);
    */

    // Sayfa y√ºklendiƒüinde input'a odaklan
    window.addEventListener('load', () => {
        encryptedCodeInput.focus();
    });
</script>
</body>
</html>